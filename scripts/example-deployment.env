# ═════════════════════════════════════════════════════════════════════════════
# Example Deployment Configuration
# ═════════════════════════════════════════════════════════════════════════════
#
# Copy this file to .env.deployment and customize for your environment:
#   cp scripts/example-deployment.env .env.deployment
#   ./scripts/implement-complete-system.sh --config .env.deployment
#
# ═════════════════════════════════════════════════════════════════════════════

# ─────────────────────────────────────────────────────────────────────────────
# REQUIRED: Forge API Configuration
# ─────────────────────────────────────────────────────────────────────────────

# Your Forge API token (get from https://forge.laravel.com/account/api-tokens)
# CRITICAL: Keep this secure! Add .env.* to .gitignore
FORGE_API_TOKEN="fak_xxxxxxxxxxxxxxxxxxxxxxxxxxxx"

# Forge API endpoint (usually no need to change)
FORGE_API_URL="https://forge.laravel.com/api/v1"

# ─────────────────────────────────────────────────────────────────────────────
# OPTIONAL: Execution Control
# ─────────────────────────────────────────────────────────────────────────────

# Start from specific phase (1-6, default: 1)
# Phase 1: Validate API Access
# Phase 2: Create Production VPS Servers
# Phase 3: Create Sites (via API)
# Phase 4: Database Snapshots (via SSH + API)
# Phase 5: Test PR Environment (via API)
# Phase 6: Monitoring Setup (via API)
PHASE_START=1

# Enable dry-run mode (preview without making changes)
# Set to 0 to actually create resources
DRY_RUN=0

# Enable verbose output
VERBOSE=0

# ─────────────────────────────────────────────────────────────────────────────
# OPTIONAL: API Configuration
# ─────────────────────────────────────────────────────────────────────────────

# How long to wait for VPS provisioning (seconds)
# DigitalOcean typically: 3-10 minutes (180-600 seconds)
# Set to 3600 (1 hour) for safety
MAX_PROVISIONING_WAIT=3600

# Check interval for provisioning status (seconds)
# Lower = faster feedback, higher = lower API calls
PROVISIONING_CHECK_INTERVAL=30

# API request timeout (seconds)
API_TIMEOUT=30

# API retry count for failed requests
API_RETRY_COUNT=3

# ─────────────────────────────────────────────────────────────────────────────
# OPTIONAL: Application Configuration
# ─────────────────────────────────────────────────────────────────────────────

# Production applications are defined in the script as:
# APPS=(
#     "keatchen-customer-app:digitalocean:nyc3:s-2vcpu-4gb:postgres"
#     "devpel-epos:digitalocean:nyc3:s-2vcpu-4gb:mysql"
# )
#
# To override, uncomment and modify:
# APP_1="keatchen-customer-app:digitalocean:nyc3:s-2vcpu-4gb:postgres"
# APP_2="devpel-epos:digitalocean:nyc3:s-2vcpu-4gb:mysql"

# Test environment configuration
TEST_APP="pr-test-environment"
TEST_PROVIDER="digitalocean"
TEST_REGION="nyc3"
TEST_SIZE="s-1vcpu-2gb"

# ─────────────────────────────────────────────────────────────────────────────
# OPTIONAL: Backup & Logging
# ─────────────────────────────────────────────────────────────────────────────

# Backup directory (relative to project root)
# Backups created here: project-root/backups/
# No need to change unless you have a custom path
BACKUP_DIR="backups"

# Log directory (relative to project root)
LOG_DIR="logs"

# Log file will be named: logs/implementation-YYYYMMDD_HHMMSS.log
# No need to change
LOG_FILE="logs/implementation.log"

# ─────────────────────────────────────────────────────────────────────────────
# OPTIONAL: Database Snapshots
# ─────────────────────────────────────────────────────────────────────────────

# How long to wait for database snapshots (seconds)
DB_SNAPSHOT_WAIT=1800

# ─────────────────────────────────────────────────────────────────────────────
# ADVANCED: SSH Configuration (for database snapshots)
# ─────────────────────────────────────────────────────────────────────────────

# SSH timeout for remote database operations
SSH_TIMEOUT=30

# SSH known hosts check
# Set to "no" to skip (less secure but useful in CI/CD)
# Set to "yes" for strict key checking (recommended for production)
SSH_STRICT_HOST_CHECK="no"

# ═════════════════════════════════════════════════════════════════════════════
# USAGE
# ═════════════════════════════════════════════════════════════════════════════

# Example 1: Full deployment (default)
#   export $(cat scripts/example-deployment.env | grep -v '^#')
#   ./scripts/implement-complete-system.sh

# Example 2: Using --config flag
#   cp scripts/example-deployment.env .env.deployment
#   ./scripts/implement-complete-system.sh --config .env.deployment

# Example 3: Dry run preview
#   ./scripts/implement-complete-system.sh --config .env.deployment --dry-run --verbose

# Example 4: Resume from Phase 3
#   ./scripts/implement-complete-system.sh --config .env.deployment --phase 3 --verbose

# Example 5: Manual with environment variables
#   export FORGE_API_TOKEN="your-token"
#   export VERBOSE=1
#   ./scripts/implement-complete-system.sh

# ═════════════════════════════════════════════════════════════════════════════
# SECURITY NOTES
# ═════════════════════════════════════════════════════════════════════════════

# IMPORTANT: Never commit this file with FORGE_API_TOKEN to version control!
#
# Add to .gitignore:
#   echo ".env.deployment" >> .gitignore
#   echo ".env.*.local" >> .gitignore
#   echo "*.env.production" >> .gitignore
#
# For CI/CD, use repository secrets instead:
#   - GitHub: Settings > Secrets and variables > Actions
#   - GitLab: Settings > CI/CD > Variables
#   - Jenkins: Credentials > System > Global credentials

# BEST PRACTICES:
# 1. Use unique tokens for different environments
# 2. Rotate tokens regularly (forge.laravel.com)
# 3. Use separate tokens for dev/staging/production
# 4. Monitor token usage in Forge dashboard
# 5. Revoke unused tokens immediately

# ═════════════════════════════════════════════════════════════════════════════
